<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/styles.css">
    <title>The SCENE</title>
</head>

<body>
    <!-- Heads‑up instructions (not part of the scene) -->
    <div class="hud">
        <div>
            <strong>Move:</strong>
            <kbd>W</kbd><kbd>A</kbd><kbd>S</kbd><kbd>D</kbd>
            • <strong>Look:</strong> mouse / drag • <strong>VR:</strong> click the goggles icon
        </div>
        <div class="track"><strong>Now playing:</strong> <span id="trackTitle">—</span></div>
    </div>

    <!-- SCENE START -->
    <a-scene>
        <a-assets timeout="30000">
            <img id="sky" src="./src/textures/sky.jpg">
            <audio id="t0" src="./src/audio/cyber_stroll.mp3" crossorigin="anonymous"></audio>
            <audio id="t1" src="./src/audio/electric_neon_heart.mp3" crossorigin="anonymous"></audio>
            <audio id="t2" src="./src/audio/neon_streets.mp3" crossorigin="anonymous"></audio>
            <audio id="t3" src="./src/audio/neon_streets.mp3" crossorigin="anonymous"></audio>
            <a-asset-item id="droide" src="./src/models/droide.glb" crossorigin="anonymous"></a-asset-item>
        </a-assets>

        <!-- камера с курсором (raycaster только по .clickable) -->
        <a-camera>
            <a-cursor raycaster="objects: .clickable"></a-cursor>
        </a-camera>

        <!-- контроллеры с лучом -->
        <a-entity id="leftHand" laser-controls="hand: left" raycaster="objects: .clickable"></a-entity>
        <a-entity id="rightHand" laser-controls="hand: right" raycaster="objects: .clickable"></a-entity>

        <!-- ЕДИНЫЙ плеер, на который будем переключать src -->
        <a-sound id="music" src="#t0" autoplay="false"></a-sound>

        <!-- небо/пол -->
        <a-sky src="#sky"></a-sky>
        <a-plane color="#000" height="20" width="20" rotation="-90 0 0" metalness="1"></a-plane>

        <a-entity light="type: directional; intensity: 6" position="1 3 2"></a-entity>

        <!-- коробка (play/pause) -->
        <a-box id="jukebox" position="0 1 -3" color="#4CC3D9" class="clickable"></a-box>

        <a-entity 
            id="robot"
            gltf-model="#droide" 
            animation-mixer="clip: motion; loop: once; clampWhenFinished: true; timeScale: 0"
            position="0 0 9" 
            rotation="0 180 0" 
            scale="1 1 1">
        </a-entity>

        <!-- 3D triangular "previous" (left) -->
        <a-entity id="prevBtn" class="clickable" position="-1.5 1 -3"
            geometry="primitive: cone; segmentsRadial: 3; height: 0.6; radiusBottom: 0.45; radiusTop: 0"
            rotation="0 90 0" color="#FFC65D"></a-entity>

        <!-- 3D triangular "next" (right) -->
        <a-entity id="nextBtn" class="clickable" position="1.5 1 -3"
            geometry="primitive: cone; segmentsRadial: 3; height: 0.6; radiusBottom: 0.45; radiusTop: 0"
            rotation="0 -90 0" color="#FFC65D"></a-entity>
    </a-scene>

    <!-- бандл, где импортируется 'aframe' через npm -->
    <script type="module" src="/src/main.js"></script>
</body>

</html>