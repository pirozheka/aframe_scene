<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The SCENE</title>
</head>

<body>
    <!-- SCENE START -->
    <a-scene shadow="type: pcfsoft" renderer="antialias: true;" loading-screen="dotsColor: red; backgroundColor: black">
        <a-assets timeout="30000">
            <img id="sky" src="/textures/sky.jpg">
            <img id="jupiter" src="/textures/Jupiter.jpg" alt="">
            <audio id="t0" src="/audio/cyber_stroll.mp3" crossorigin="anonymous"></audio>
            <audio id="t1" src="/audio/electric_neon_heart.mp3" crossorigin="anonymous"></audio>
            <audio id="t2" src="/audio/neon_streets.mp3" crossorigin="anonymous"></audio>
            <audio id="t3" src="/audio/synth_beat.mp3" crossorigin="anonymous"></audio>
            <audio id="t4" src="/audio/night_highway.mp3" crossorigin="anonymous"></audio>
            <a-asset-item id="droide" src="/models/droide.glb" crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="rover" src="/models/perseverance.glb" crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="home" src="/models/habitat.glb" crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="table" src="/models/sci-fi_table.glb" crossorigin="anonymous"></a-asset-item>
            <a-asset-item id="music_box" src="/models/music_box.glb" crossorigin="anonymous"></a-asset-item>
        </a-assets>

        <!-- Свет -->
        <a-entity light="type: ambient; intensity: 1">
        </a-entity>
        <a-entity id="sun" light="type: directional;
            intensity: 3;
            castShadow: true;
        " position="2 6 4">
        </a-entity>
        <!-- Небо и пол (пол = навмеш) -->
        <a-sky src="#sky"></a-sky>
        <a-plane nav-mesh color="#43464b" width="20" height="20" rotation="-90 0 0" shadow="receive: true"
            metalness="0.7"></a-plane>

        <!-- RIG: движение по навмешу -->
        <a-entity id="rig" movement-controls="constrainToNavMesh: true" position="0 0 0">
            <!-- Камера -->
            <a-camera position="0 1.7 0" look-controls="pointerLockEnabled: true"></a-camera>

            <!-- Курсор для МЫШИ: отдельный источник луча, без геометрии -->
            <a-entity id="mouseRay" cursor="rayOrigin: mouse" raycaster="objects: .clickable; far: 10"></a-entity>

            <!-- Лазеры VR-контроллеров -->
            <a-entity id="leftHand" laser-controls="hand: left" meta-touch-controls
                raycaster="objects: .clickable; far: 5; lineColor: red; lineOpacity: 0.5">
            </a-entity>
            <a-entity id="rightHand" laser-controls="hand: right" meta-touch-controls
                raycaster="objects: .clickable; far: 5; lineColor: red; lineOpacity: 0.5">
            </a-entity>
        </a-entity>


        <!-- Единый плеер -->
        <a-sound id="music" src="#t0" autoplay="false" positional="false">
        </a-sound>

        <!-- Робот с тенью -->
        <a-entity id="robot" gltf-model="#droide" animation-mixer="clip: motion" position="0 0 -6" rotation="0 180 0"
            scale="1 1 1" shadow="cast: true">
        </a-entity>

        <a-entity id="perseverance" gltf-model="#rover" position="-6 0 -3" rotation="0 180 0" scale="1 1 1"
            shadow="cast: true">
        </a-entity>

        <a-sphere src="#jupiter" position="7 20 -40" radius="6" opacity="0.8"
            animation="property: rotation; to: 0 360 0; loop: true; dur: 200000; easing: linear;">

        </a-sphere>

        <a-entity id="sci_fi_table" gltf-model="#table" position="-3 0.7 -5" scale="1 1 1" shadow="cast: true">
        </a-entity>

        <a-plane id="screen" position="-3 0.75 -5" width="1.1" height="0.61" rotation="-90 0 0" opacity="0.7"
            color="#20B2AA" style="border-radius: 10px;">
        </a-plane>
        <a-entity gltf-model="#music_box" position="-2.2 0.75 -5" scale="1 1 1" shadow="cast: true">
        </a-entity>
    </a-scene>

    <!-- бандл, где импортируется 'aframe' через npm -->
    <script type="module" src="/src/main.js"></script>
</body>

</html>